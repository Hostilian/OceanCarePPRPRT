<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate - OceanCare Initiative</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="/js/toast.js" defer></script>
    <script src="/js/form-validator.js" defer></script>
</head>
<body>
    <!-- Header/Navigation -->
    <header>
        <div class="container">
            <div class="flex-between">
                <a href="/" class="logo">ðŸŒŠ OceanCare</a>
                <nav>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/pages/projects.html">Projects</a></li>
                        <li><a href="/pages/team.html">Team</a></li>
                        <li><a href="/pages/login.html">Log In</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Page Hero -->
    <section class="hero hero-gradient">
        <div class="container">
            <div class="hero-content animate-fade-in">
                <h1>Make a Lasting Difference</h1>
                <p class="hero-subtitle">
                    Your donation directly funds critical ocean conservation projects. Track your impact in real-time and see exactly where every dollar goes.
                </p>
            </div>
        </div>
    </section>

    <!-- Impact Calculator -->
    <section class="section-spaced">
        <div class="container">
            <div class="section-header">
                <h2>ðŸ’° Impact Calculator</h2>
                <p>
                Select a donation amount to see your real-world impact on ocean conservation.
            </p>

            <div class="card" style="max-width: 600px; margin: 0 auto; padding: var(--space-8);">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: var(--space-4); margin-bottom: var(--space-8);">
                    <button class="btn btn-outline impact-amount" data-amount="25">$25</button>
                    <button class="btn btn-outline impact-amount" data-amount="50">$50</button>
                    <button class="btn btn-outline impact-amount" data-amount="100">$100</button>
                    <button class="btn btn-outline impact-amount" data-amount="250">$250</button>
                    <button class="btn btn-outline impact-amount" data-amount="500">$500</button>
                    <button class="btn btn-outline impact-amount" data-amount="1000">$1,000</button>
                </div>

                <div style="margin-bottom: var(--space-6);">
                    <label style="display: block; margin-bottom: var(--space-2);">Or enter a custom amount:</label>
                    <div style="display: flex; gap: var(--space-2);">
                        <input type="number" id="customAmount" placeholder="$" min="1" step="1" style="flex: 1;">
                        <button class="btn btn-primary" onclick="setCustomAmount()">Apply</button>
                    </div>
                </div>

                <div id="impactDisplay" style="background: linear-gradient(135deg, rgba(0, 119, 190, 0.1), rgba(0, 119, 190, 0.05)); border-radius: var(--radius-base); padding: var(--space-6); text-align: center;">
                    <p style="color: var(--color-text-lighter); margin-bottom: var(--space-2);">Select an amount to see your impact</p>
                    <p style="font-size: var(--text-sm); color: var(--color-text-lighter);">Every dollar protects our oceans</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Donation Form & Info -->
    <section class="section-spaced bg-secondary">
        <div class="container">
            <div class="grid grid-cols-2 gap-12">
                <!-- Donation Form -->
                <div>
                    <h2 style="margin-bottom: var(--space-6);">Make Your Donation</h2>
                    <form id="donationForm" class="card" style="padding: var(--space-8);">
                        <div class="form-group">
                            <label for="donorName">Full Name *</label>
                            <input type="text" id="donorName" name="donorName" required placeholder="Your full name">
                        </div>

                        <div class="form-group">
                            <label for="donorEmail">Email Address *</label>
                            <input type="email" id="donorEmail" name="donorEmail" required placeholder="your.email@example.com">
                        </div>

                        <div class="form-group">
                            <label for="donationAmount">Donation Amount (USD) *</label>
                            <input type="number" id="donationAmount" name="donationAmount" required placeholder="0" min="1" step="0.01">
                        </div>

                        <div class="form-group">
                            <label for="focus">Where should your donation go? *</label>
                            <select id="focus" name="focus" required>
                                <option value="">-- Select a focus area --</option>
                                <option value="cleanup">Coastal Cleanup Programs</option>
                                <option value="coral">Coral Reef Restoration</option>
                                <option value="research">Ocean Research & Monitoring</option>
                                <option value="education">Education & Outreach</option>
                                <option value="general">General Ocean Conservation</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="paymentMethod">Payment Method *</label>
                            <select id="paymentMethod" name="paymentMethod" required>
                                <option value="">-- Select payment method --</option>
                                <option value="credit">Credit Card</option>
                                <option value="paypal">PayPal</option>
                                <option value="bank">Bank Transfer</option>
                            </select>
                        </div>

                        <label style="display: flex; align-items: center; gap: var(--space-2); margin-bottom: var(--space-4);">
                            <input type="checkbox" name="recurring" style="width: auto;">
                            <span style="color: var(--color-text-light);">Make this a monthly donation</span>
                        </label>

                        <label style="display: flex; align-items: center; gap: var(--space-2); margin-bottom: var(--space-4);">
                            <input type="checkbox" name="anonymous" style="width: auto;">
                            <span style="color: var(--color-text-light);">Donate anonymously</span>
                        </label>

                        <button type="submit" class="btn btn-primary btn-lg" style="width: 100%;">Complete Donation</button>
                    </form>
                </div>

                <!-- Why Donate Info -->
                <div>
                    <h2 style="margin-bottom: var(--space-6);">Why Your Donation Matters</h2>

                    <div class="card" style="margin-bottom: var(--space-4);">
                        <h3 style="color: var(--color-primary); margin-top: 0; margin-bottom: var(--space-2);">100% Transparent</h3>
                        <p style="color: var(--color-text-light); font-size: var(--text-sm);">
                            We publish detailed impact reports every month. See exactly where your money goes and the results it creates.
                        </p>
                    </div>

                    <div class="card" style="margin-bottom: var(--space-4);">
                        <h3 style="color: var(--color-primary); margin-top: 0; margin-bottom: var(--space-2);">Verified Impact</h3>
                        <p style="color: var(--color-text-light); font-size: var(--text-sm);">
                            All conservation results are verified by third-party partners. No empty promisesâ€”just real ocean protection.
                        </p>
                    </div>

                    <div class="card" style="margin-bottom: var(--space-4);">
                        <h3 style="color: var(--color-primary); margin-top: 0; margin-bottom: var(--space-2);">Tax Deductible</h3>
                        <p style="color: var(--color-text-light); font-size: var(--text-sm);">
                            OceanCare Initiative is a registered 501(c)(3) nonprofit. Your donation is tax deductible. You'll receive a receipt immediately.
                        </p>
                    </div>

                    <div class="card">
                        <h3 style="color: var(--color-primary); margin-top: 0; margin-bottom: var(--space-2);">Donor Dashboard</h3>
                        <p style="color: var(--color-text-light); font-size: var(--text-sm);">
                            After donating, create a free account to access your personal dashboard. Track all donations and cumulative impact over time.
                        </p>
                        <a href="/pages/login.html" class="btn btn-secondary btn-sm" style="margin-top: var(--space-3); display: inline-block;">Log In</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="section-spaced">
        <div class="container text-center">
            <h2 style="margin-bottom: var(--space-4);">Questions About Donations?</h2>
            <p style="color: var(--color-text-light); margin-bottom: var(--space-6);">
                Contact us at <strong>donate@oceancare.org</strong> or call <strong>(555) 123-4568</strong>
            </p>
            <a href="#contact-form" class="btn btn-secondary">Send a Message</a>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="grid grid-cols-4 gap-8" style="margin-bottom: var(--space-12);">
                <div>
                    <h5>About</h5>
                    <ul style="list-style: none; padding: 0;">
                        <li><a href="/pages/team.html">Our Team</a></li>
                        <li><a href="/pages/projects.html">Our Projects</a></li>
                        <li><a href="#">Careers</a></li>
                        <li><a href="#">Press Kit</a></li>
                    </ul>
                </div>
                <div>
                    <h5>Get Involved</h5>
                    <ul style="list-style: none; padding: 0;">
                        <li><a href="/pages/volunteer.html">Volunteer</a></li>
                        <li><a href="/pages/contact.html">Donate</a></li>
                        <li><a href="/pages/report-debris.html">Report Debris</a></li>
                        <li><a href="#">Partner With Us</a></li>
                    </ul>
                </div>
                <div>
                    <h5>Support</h5>
                    <ul style="list-style: none; padding: 0;">
                        <li><a href="/pages/contact.html">Contact Us</a></li>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Community</a></li>
                    </ul>
                </div>
                <div>
                    <h5>Legal</h5>
                    <ul style="list-style: none; padding: 0;">
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                        <li><a href="#">Cookie Policy</a></li>
                        <li><a href="#">Compliance</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-top" style="padding-top: var(--space-8); text-align: center; color: rgba(255,255,255,0.7); font-size: var(--text-sm);">
                <p>&copy; 2025 OceanCare Initiative. All rights reserved. | Protecting oceans, one action at a time.</p>
                <div style="margin-top: var(--space-4);">
                    <a href="#" style="color: rgba(255,255,255,0.7); margin: 0 var(--space-4); text-decoration: none;">Facebook</a>
                    <a href="#" style="color: rgba(255,255,255,0.7); margin: 0 var(--space-4); text-decoration: none;">Twitter</a>
                    <a href="#" style="color: rgba(255,255,255,0.7); margin: 0 var(--space-4); text-decoration: none;">Instagram</a>
                    <a href="#" style="color: rgba(255,255,255,0.7); margin: 0 var(--space-4); text-decoration: none;">LinkedIn</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        const impacts = {
            25: { corals: 7, animals: 2, waste: 1.5, educated: 2 },
            50: { corals: 14, animals: 4, waste: 3, educated: 4 },
            100: { corals: 28, animals: 8, waste: 6, educated: 8 },
            250: { corals: 70, animals: 20, waste: 15, educated: 20 },
            500: { corals: 140, animals: 40, waste: 30, educated: 40 },
            1000: { corals: 280, animals: 80, waste: 60, educated: 80 }
        };

        document.querySelectorAll('.impact-amount').forEach(btn => {
            btn.addEventListener('click', () => {
                const amount = parseInt(btn.dataset.amount);
                setImpact(amount);
                document.querySelectorAll('.impact-amount').forEach(b => b.classList.remove('btn-primary'));
                btn.classList.add('btn-primary');
                document.getElementById('donationAmount').value = amount;
            });
        });

        function setCustomAmount() {
            const amount = parseFloat(document.getElementById('customAmount').value);
            if (amount > 0) {
                setImpact(amount);
                document.querySelectorAll('.impact-amount').forEach(b => b.classList.remove('btn-primary'));
            }
        }

        function setImpact(amount) {
            let impact = impacts[amount];
            if (!impact) {
                const scale = amount / 25;
                impact = {
                    corals: Math.round(7 * scale),
                    animals: Math.round(2 * scale),
                    waste: (1.5 * scale).toFixed(1),
                    educated: Math.round(2 * scale)
                };
            }

            document.getElementById('impactDisplay').innerHTML = `
                <p style="color: var(--color-text-lighter); margin-bottom: var(--space-4); font-size: var(--text-sm);">Your $${amount.toFixed(2)} donation will:</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: var(--space-3);">
                    <div>
                        <div style="font-size: 1.8rem; font-weight: bold; color: var(--color-primary);">${impact.corals}+</div>
                        <div style="font-size: var(--text-sm); color: var(--color-text-lighter);">Coral Fragments</div>
                    </div>
                    <div>
                        <div style="font-size: 1.8rem; font-weight: bold; color: var(--color-primary);">${impact.animals}</div>
                        <div style="font-size: var(--text-sm); color: var(--color-text-lighter);">Animals Protected</div>
                    </div>
                    <div>
                        <div style="font-size: 1.8rem; font-weight: bold; color: var(--color-primary);">${impact.waste}kg</div>
                        <div style="font-size: var(--text-sm); color: var(--color-text-lighter);">Plastic Removed</div>
                    </div>
                    <div>
                        <div style="font-size: 1.8rem; font-weight: bold; color: var(--color-primary);">${impact.educated}</div>
                        <div style="font-size: var(--text-sm); color: var(--color-text-lighter);">People Educated</div>
                    </div>
                </div>
            `;
        }

        document.getElementById('donationForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = {
                name: document.getElementById('donorName').value,
                email: document.getElementById('donorEmail').value,
                amount: parseFloat(document.getElementById('donationAmount').value),
                focus: document.getElementById('focus').value,
                paymentMethod: document.getElementById('paymentMethod').value,
                recurring: document.querySelector('input[name="recurring"]').checked,
                anonymous: document.querySelector('input[name="anonymous"]').checked
            };

            try {
                const response = await fetch('/api/donate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    const result = await response.json();
                    // Store donor info for dashboard
                    localStorage.setItem('donorData', JSON.stringify({
                        name: formData.name,
                        email: formData.email
                    }));
                    // Redirect to success page with amount parameter
                    setTimeout(() => {
                        window.location.href = `/pages/donation-success.html?amount=${formData.amount}`;
                    }, 1000);
                } else {
                    const error = await response.json();
                    toast.error(error.message || 'Failed to process donation. Please try again.', 5000);
                }
            } catch (error) {
                toast.error('Network error: ' + error.message + '. Please check your connection and try again.', 5000);
            }
        });

        // Initialize form validator when page loads
        document.addEventListener('DOMContentLoaded', () => {
            const donationValidator = new FormValidator(document.getElementById('donationForm'));
        });
    </script>

    <style>
        @media (max-width: 768px) {
            .grid.grid-cols-2 { grid-template-columns: 1fr; }
        }
    </style>
</body>
</html>
